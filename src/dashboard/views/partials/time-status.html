<div
  class="p-2 text-sm border-b border-gray-400 dark:border-gray-700 git-status flex items-center justify-between"
  hx-get="/time/{{siteId}}/status"
  hx-trigger="commitsChanged from:body"
  hx-swap="outerHTML"
>

  <!-- Status indicators -->
  <div class="flex items-center gap-3">

    {{#if localAhead}}
      <div
        class="flex items-center gap-1"
        title="{{localAhead}} commit{{#unless (eq localAhead 1)}}s{{/unless}} ahead locally"
      >
        <span aria-hidden="true">↑</span>
        <span>{{localAhead}}</span>
      </div>
    {{/if}}

    {{#if remoteAhead}}
      <div
        class="flex items-center gap-1"
        title="{{remoteAhead}} commit{{#unless (eq remoteAhead 1)}}s{{/unless}} ahead on remote"
      >
        <span aria-hidden="true">↓</span>
        <span>{{remoteAhead}}</span>
      </div>
    {{/if}}

    {{#unless localAhead}}
      {{#unless remoteAhead}}
        <div title="Local and remote are in sync">
          In sync
        </div>
      {{/unless}}
    {{/unless}}

  </div>

  <!-- Action -->
  <div class="flex items-center gap-2">

    {{#if hasConflict}}
      <div
        class="flex items-center gap-2"
        title="Cannot sync automatically: local ({{localAhead}}) and remote ({{remoteAhead}}) have diverged"
      >
        <span aria-hidden="true">⚠️</span>
        <span>
          {{localAhead}} / {{remoteAhead}}
        </span>

        <button
          disabled
          title="Resolve the merge conflict before syncing"
        >
          Sync
        </button>
      </div>
    {{else}}
      {{#if localAhead}}
        <button
          hx-post="/time/{{siteId}}/push"
          hx-swap="none"
          title="Push {{localAhead}} commit{{#unless (eq localAhead 1)}}s{{/unless}} to remote"
        >
          Sync
        </button>
      {{/if}}

      {{#if remoteAhead}}
        <button
          hx-post="/time/{{siteId}}/pull"
          hx-swap="none"
          title="Pull {{remoteAhead}} commit{{#unless (eq remoteAhead 1)}}s{{/unless}} from remote"
        >
          Sync
        </button>
      {{/if}}
    {{/if}}

  </div>

</div>
