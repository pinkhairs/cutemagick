<div
  class="p-2 text-sm border-b border-gray-400 dark:border-gray-700 git-status flex items-center justify-center"
  hx-get="/time/{{siteId}}/status"
  hx-trigger="commitsChanged from:body"
  hx-swap="outerHTML"
>
  <div class="flex items-center gap-6">
    {{#if localAhead}}
      <button
        class="flex items-center gap-1"
        hx-post="/sites/{{siteId}}/push"
        hx-swap="none"
        hx-indicator="this"
        aria-busy="false"
        data-tippy-content="Make the other copy match this one"
        onclick="this.setAttribute('aria-busy', 'true'); this.querySelector('.arrow-count').style.visibility = 'hidden';"
      >
        <span>{{localPlace}}</span>
        <span class="arrow-count">
          <span aria-hidden="true">↑</span>
          <span>{{localAhead}}</span>
        </span>
      </button>
      <script>
        document.currentScript.previousElementSibling.addEventListener('htmx:afterRequest', function() {
          this.setAttribute('aria-busy', 'false');
          this.querySelector('.arrow-count').style.visibility = 'visible';
          document.body.dispatchEvent(new Event('commitsChanged'));
        });
      </script>
    {{/if}}
    {{#if remoteAhead}}
      <button
        class="flex items-center gap-1"
        hx-post="/sites/{{siteId}}/pull"
        hx-swap="none"
        hx-indicator="this"
        aria-busy="false"
        data-tippy-content="Bring those changes into this copy"
        onclick="this.setAttribute('aria-busy', 'true'); this.querySelector('.arrow-count').style.visibility = 'hidden';"
      >
        <span>{{externalPlace}}</span>
        <span class="arrow-count">
          <span aria-hidden="true">↓</span>
          <span>{{remoteAhead}}</span>
        </span>
      </button>
      <script>
        document.currentScript.previousElementSibling.addEventListener('htmx:afterRequest', function() {
          this.setAttribute('aria-busy', 'false');
          this.querySelector('.arrow-count').style.visibility = 'visible';
          document.body.dispatchEvent(new Event('commitsChanged'));
        });
      </script>
    {{/if}}
    {{#unless localAhead}}
      {{#unless remoteAhead}}
        <div>In sync</div>
      {{/unless}}
    {{/unless}}
  </div>
</div>